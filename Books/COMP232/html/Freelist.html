
<!DOCTYPE html>




<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>6.10. Freelists &mdash; COMP232: Data Structures and Algorithms</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/normalize.css" type="text/css" />
    <link rel="stylesheet" href="../../../JSAV/css/JSAV.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/odsaMOD-min.css" type="text/css" />
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/odsaStyle-min.css" type="text/css" />
    
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    './',
      VERSION:     '0.4.1',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
      },
      "HTML-CSS": {
        scale: "80"
      }
    });
  </script>
    <link rel="index" title="COMP232: Data Structures and Algorithms" href="index.html" />
    <link rel="next" title="11. Implementing Recursion" href="StackRecur.html" />
    <link rel="prev" title="9. Linked Stacks" href="StackLinked.html" />

  </head>

  <body>


      <div class="header">
        
  
      <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../JSAV/lib/jquery.transit.js"></script>
    <script type="text/javascript" src="../../../JSAV/lib/raphael.js"></script>
    <script type="text/javascript" src="../../../JSAV/build/JSAV-min.js"></script>
    <script type="text/javascript" src="_static/config.js"></script>
    <script type="text/javascript" src="../../../lib/odsaUtils-min.js"></script>
    <script type="text/javascript" src="../../../lib/odsaMOD-min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
    <script type="text/javascript" src="../../../lib/dataStructures.js"></script>
    <script type="text/javascript" src="../../../lib/conceptMap.js"></script>

        
<a id="username-link" style="float:right;color:red;margin:10px 20px auto; display: none" class="username-link" href="Gradebook.html"></a>
<a id="login-link" style="float:right;color:red;margin:10px 20px auto" class="login-link" href="#"><Macro 'login'></a>
<div id="login-box" class="login-popup">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a>
  <form method="post" class="signin" action="https://#">
    <fieldset class="textbox">
      <label class="username">
        <span>Username</span>
        <input id="username" value="" type="text" autocomplete="on" placeholder="Username" tabindex="1">
      </label>
      <label class="password">
        <span>Password</span>
        <input id="password" value="" type="password" placeholder="Password" tabindex="2">
        <span><a id="forgot" href="#">Forgot your password?</a></span>
      </label>

      <p>
        <input type="submit" id="login-submit-button" value="Sign in" tabindex="3" />
      </p>
      <p>
        <input type="button" id="register-button" value="Register" tabindex="4" />
      </p>
    </fieldset>
  </form>
</div>

        
<a id="registration-link" style="float:right;color:red;margin:10px 20px auto" class="registration-link" href="#">Register</a>
<div id="registration-box" class="registration-popup ">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close Window" /></a>
  <form method="post" class="signin" action="https://#">
    <fieldset class="textbox">
      <div id="register_error" class="error"></div>
      <label class="username">
        <span>Username:</span>
        <input type="text" id="user" placeholder="Username" />
      </label>

      <label class="password">
        <span>Password</span>
        <input id="pass" type="password" placeholder="Password" />
      </label>

      <label class="password">
        <span>Confirm Password</span>
        <input id="rpass" type="password" placeholder="Confirm Password" />
      </label>

      <label class="email">
        <span>Email:</span>
        <input type="text" id="email" placeholder="Email">
      </label>

      <p>
        <input type="submit" id="register-submit-button" value="Register &rarr;"/>
      </p>
    </fieldset>
  </form>
</div>
<img class="leftlogo" src="_static/OpenDSALogoT64.png" alt="Logo"/><div class="title-wrapper">
          <div class="title-inbetween" style="display: table-cell; vertical-align: middle;">
            <div class="title-content">
              <h1 class="heading" ><a href="index.html">
                <span>COMP232: Data Structures and Algorithms</span></a></h1>
              <h2 class="heading" ><span>Chapter 6 Linear Structures</span></h2>
            </div>
          </div>
        </div>
      </div>
      <div class="topnav">
        <p>
            <a style="float:left;color:blue;" href="../source/Freelist.rst"
              target="_blank" rel="nofollow">Show Source | </a>&#160;&#160;
            <a class="abt" style="float:left;color:blue;" href="#" rel="nofollow">| About</a>&#160;&#160;

          
        «&#160;&#160;<a id="prevmod" href="StackLinked.html">6.9. Linked Stacks</a>
        &#160;&#160;::&#160;&#160;
        <a  class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a  id="nextmod" href="StackRecur.html">6.11. Implementing Recursion</a>&#160;&#160;»


        </p>
      </div>
       
      <div class="content">
        
  <script>ODSA.SETTINGS.DISP_MOD_COMP = true;ODSA.SETTINGS.MODULE_NAME = "Freelist";ODSA.SETTINGS.MODULE_LONG_NAME = "Freelists";ODSA.SETTINGS.MODULE_CHAPTER = "Linear Structures"; ODSA.SETTINGS.BUILD_DATE = "2017-11-27 23:03:57"; ODSA.SETTINGS.BUILD_CMAP = false;JSAV_OPTIONS['lang']='en';JSAV_EXERCISE_OPTIONS['code']='java_generic';</script><link href="../../../AV/List/listFreeCON.css" rel="stylesheet" type="text/css" />
<div class="section" id="freelists">
<h1>6.10. Freelists<a class="headerlink" href="#freelists" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>6.10.1. Freelists<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">new</span></code> operator is relatively expensive to use.
Garbage collection is also expensive.
A <a href="MemmanIntro.html">Memory Management</a>
handles general-purpose memory requests.
The expense comes from the fact that <a class="reference internal" href="Glossary.html#term-free-store"><em class="xref std std-term ODSAterm">free store</em></a> routines must
be capable of handling requests to and from free store with no
particular pattern, as well as memory requests of vastly different
sizes.
This, combined with unpredictable freeing of space by the garbage
collector, makes them inefficient compared to what might be
implemented for more controlled patterns of memory access.</p>
<p>List nodes are created and deleted in a <a class="reference internal" href="Glossary.html#term-linked-list"><em class="xref std std-term ODSAterm">linked list</em></a>
implementation in a way that allows the <code class="docutils literal"><span class="pre">Link</span></code> class programmer
to provide simple but efficient memory management routines.
Instead of making repeated calls to <code class="docutils literal"><span class="pre">new</span></code>,
the <code class="docutils literal"><span class="pre">Link</span></code> class can handle its own <a class="reference internal" href="Glossary.html#term-freelist"><em class="xref std std-term ODSAterm">freelist</em></a>.
A freelist holds those list nodes that are not currently being used.
When a node is deleted from a linked list, it is placed at the
head of the freelist.
When a new element is to be added to a linked list, the freelist
is checked to see if a list node is available.
If so, the node is taken from the freelist.
If the freelist is empty, the standard <code class="docutils literal"><span class="pre">new</span></code> operator must then
be called.
So we see that the freelist is simply
an application of a <a class="reference internal" href="StackLinked.html#stacklinked"><em>linked stack</em></a>.</p>
<div id="listFreeCON" class="ssAV" data-points="0.0" data-threshold="1.0" data-type="ss" data-required="False" data-long-name="Freelist Slideshow 1">
 <span class="jsavcounter"></span>
 <a class="jsavsettings" href="#">Settings</a>
 <div class="jsavcontrols"></div>
 <p class="jsavoutput jsavline"></p>
 <div class="jsavcanvas"></div>
 <div class="prof_indicators">
  <img id="listFreeCON_check_mark" class="prof_check_mark" src="_static/Images/green_check.png" alt="Proficient" />
  <span id="listFreeCON_cm_saving_msg" class="cm_saving_msg">Saving...</span>
  <span id="listFreeCON_cm_error_msg" class="cm_error_msg">
   <img id="listFreeCON_cm_warning_icon" class="cm_warning_icon" src="_static/Images/warning.png" alt="Error Saving" /><br />
   Server Error<br />
   <a href="#" class="resubmit_link">Resubmit</a>
  </span>
 </div>
</div>
<p></p>
<p>Freelists are particularly useful for linked lists that periodically
grow and then shrink.
The freelist will never grow larger than the largest size yet reached
by the linked list.
Requests for new nodes (after the list has shrunk) can be handled by
the freelist.
Another good opportunity to use a freelist occurs when a program uses
multiple lists.
So long as they do not all grow and shrink together, the free list can
let link nodes move between the lists.</p>
<p>In the implementation shown here, the <code class="docutils literal"><span class="pre">Link</span></code> class is augmented with
methods <code class="docutils literal"><span class="pre">get</span></code> and <code class="docutils literal"><span class="pre">release</span></code>. <a class="footnote-reference" href="#id3" id="id2">[1]</a></p>
<div id="Freelink_Freelink_code"><ul><li><a href="#Freelink_Freelink_code_Java_Generic">Java (Generic)</a></li><li><a href="#Freelink_Freelink_code_Java">Java</a></li><li><a href="#Freelink_Freelink_code_Processing">Processing</a></li></ul><div id="Freelink_Freelink_code_Java_Generic"><div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Link</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="o">{</span>      <span class="c1">// Singly linked list node with freelist support</span>
  <span class="kd">private</span> <span class="n">E</span> <span class="n">e</span><span class="o">;</span>       <span class="c1">// Value for this node</span>
  <span class="kd">private</span> <span class="n">Link</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">n</span><span class="o">;</span>    <span class="c1">// Point to next node in list</span>

  <span class="c1">// Constructors</span>
  <span class="n">Link</span><span class="o">(</span><span class="n">E</span> <span class="n">it</span><span class="o">,</span> <span class="n">Link</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">inn</span><span class="o">)</span> <span class="o">{</span> <span class="n">e</span> <span class="o">=</span> <span class="n">it</span><span class="o">;</span> <span class="n">n</span> <span class="o">=</span> <span class="n">inn</span><span class="o">;</span> <span class="o">}</span>
  <span class="n">Link</span><span class="o">(</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">inn</span><span class="o">)</span> <span class="o">{</span> <span class="n">e</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="n">n</span> <span class="o">=</span> <span class="n">inn</span><span class="o">;</span> <span class="o">}</span>

  <span class="n">E</span> <span class="nf">element</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">e</span><span class="o">;</span> <span class="o">}</span>                        <span class="c1">// Return the value</span>
  <span class="n">E</span> <span class="nf">setElement</span><span class="o">(</span><span class="n">E</span> <span class="n">it</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">e</span> <span class="o">=</span> <span class="n">it</span><span class="o">;</span> <span class="o">}</span>            <span class="c1">// Set element value</span>
  <span class="n">Link</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">n</span><span class="o">;</span> <span class="o">}</span>                     <span class="c1">// Return next link</span>
  <span class="n">Link</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="nf">setNext</span><span class="o">(</span><span class="n">Link</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">inn</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">n</span> <span class="o">=</span> <span class="n">inn</span><span class="o">;</span> <span class="o">}</span> <span class="c1">// Set next link</span>

  <span class="c1">// Extensions to support freelists</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Link</span> <span class="n">freelist</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>                  <span class="c1">// Freelist for the class</span>

  <span class="c1">// Return a new link, from freelist if possible</span>
  <span class="kd">static</span> <span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">Link</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="nf">get</span><span class="o">(</span><span class="n">E</span> <span class="n">it</span><span class="o">,</span> <span class="n">Link</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">inn</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">freelist</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
      <span class="k">return</span> <span class="k">new</span> <span class="n">Link</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;(</span><span class="n">it</span><span class="o">,</span> <span class="n">inn</span><span class="o">);</span>                 <span class="c1">// Get from &quot;new&quot;</span>
    <span class="n">Link</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">freelist</span><span class="o">;</span>                       <span class="c1">// Get from freelist</span>
    <span class="n">freelist</span> <span class="o">=</span> <span class="n">freelist</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
    <span class="n">temp</span><span class="o">.</span><span class="na">setElement</span><span class="o">(</span><span class="n">it</span><span class="o">);</span>
    <span class="n">temp</span><span class="o">.</span><span class="na">setNext</span><span class="o">(</span><span class="n">inn</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">temp</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// Return a link node to the freelist</span>
  <span class="kt">void</span> <span class="nf">release</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">e</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>   <span class="c1">// Drop reference to the element</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">freelist</span><span class="o">;</span>
    <span class="n">freelist</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div><div id="Freelink_Freelink_code_Java"><div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Link</span> <span class="o">{</span>         <span class="c1">// Singly linked list node with freelist support</span>
  <span class="kd">private</span> <span class="n">Object</span> <span class="n">e</span><span class="o">;</span>  <span class="c1">// Value for this node</span>
  <span class="kd">private</span> <span class="n">Link</span> <span class="n">n</span><span class="o">;</span>    <span class="c1">// Point to next node in list</span>

  <span class="c1">// Constructors</span>
  <span class="n">Link</span><span class="o">(</span><span class="n">Object</span> <span class="n">it</span><span class="o">,</span> <span class="n">Link</span> <span class="n">inn</span><span class="o">)</span> <span class="o">{</span> <span class="n">e</span> <span class="o">=</span> <span class="n">it</span><span class="o">;</span> <span class="n">n</span> <span class="o">=</span> <span class="n">inn</span><span class="o">;</span> <span class="o">}</span>
  <span class="n">Link</span><span class="o">(</span><span class="n">Link</span> <span class="n">inn</span><span class="o">)</span> <span class="o">{</span> <span class="n">e</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="n">n</span> <span class="o">=</span> <span class="n">inn</span><span class="o">;</span> <span class="o">}</span>

  <span class="n">Object</span> <span class="nf">element</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">e</span><span class="o">;</span> <span class="o">}</span>           <span class="c1">// Return the value</span>
  <span class="n">Object</span> <span class="nf">setElement</span><span class="o">(</span><span class="n">Object</span> <span class="n">it</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">e</span> <span class="o">=</span> <span class="n">it</span><span class="o">;</span> <span class="o">}</span> <span class="c1">// Set element value</span>
  <span class="n">Link</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">n</span><span class="o">;</span> <span class="o">}</span>                <span class="c1">// Return next link</span>
  <span class="n">Link</span> <span class="nf">setNext</span><span class="o">(</span><span class="n">Link</span> <span class="n">inn</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">n</span> <span class="o">=</span> <span class="n">inn</span><span class="o">;</span> <span class="o">}</span>      <span class="c1">// Set next link</span>

  <span class="c1">// Extensions to support freelists</span>
  <span class="kd">static</span> <span class="n">Link</span> <span class="n">freelist</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>     <span class="c1">// Freelist for the class</span>

  <span class="c1">// Return a new link, from freelist if possible</span>
  <span class="kd">static</span> <span class="n">Link</span> <span class="nf">get</span><span class="o">(</span><span class="n">Object</span> <span class="n">it</span><span class="o">,</span> <span class="n">Link</span> <span class="n">inn</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">freelist</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
      <span class="k">return</span> <span class="k">new</span> <span class="n">Link</span><span class="o">(</span><span class="n">it</span><span class="o">,</span> <span class="n">inn</span><span class="o">);</span>        <span class="c1">// Get from &quot;new&quot;</span>
    <span class="n">Link</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">freelist</span><span class="o">;</span>              <span class="c1">// Get from freelist</span>
    <span class="n">freelist</span> <span class="o">=</span> <span class="n">freelist</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
    <span class="n">temp</span><span class="o">.</span><span class="na">setElement</span><span class="o">(</span><span class="n">it</span><span class="o">);</span>
    <span class="n">temp</span><span class="o">.</span><span class="na">setNext</span><span class="o">(</span><span class="n">inn</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">temp</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// Return a link node to the freelist</span>
  <span class="kt">void</span> <span class="nf">release</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">e</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>   <span class="c1">// Drop reference to the element</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">freelist</span><span class="o">;</span>
    <span class="n">freelist</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div><div id="Freelink_Freelink_code_Processing"><div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">static</span> <span class="kd">class</span> <span class="nc">Link</span> <span class="o">{</span>         <span class="c1">// Singly linked list node with freelist support</span>
  <span class="kd">private</span> <span class="n">Object</span> <span class="n">e</span><span class="o">;</span>  <span class="c1">// Value for this node</span>
  <span class="kd">private</span> <span class="n">Link</span> <span class="n">n</span><span class="o">;</span>    <span class="c1">// Point to next node in list</span>

  <span class="c1">// Constructors</span>
  <span class="n">Link</span><span class="o">(</span><span class="n">Object</span> <span class="n">it</span><span class="o">,</span> <span class="n">Link</span> <span class="n">inn</span><span class="o">)</span> <span class="o">{</span> <span class="n">e</span> <span class="o">=</span> <span class="n">it</span><span class="o">;</span> <span class="n">n</span> <span class="o">=</span> <span class="n">inn</span><span class="o">;</span> <span class="o">}</span>
  <span class="n">Link</span><span class="o">(</span><span class="n">Link</span> <span class="n">inn</span><span class="o">)</span> <span class="o">{</span> <span class="n">e</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="n">n</span> <span class="o">=</span> <span class="n">inn</span><span class="o">;</span> <span class="o">}</span>

  <span class="n">Object</span> <span class="nf">element</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">e</span><span class="o">;</span> <span class="o">}</span>           <span class="c1">// Return the value</span>
  <span class="n">Object</span> <span class="nf">setElement</span><span class="o">(</span><span class="n">Object</span> <span class="n">it</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">e</span> <span class="o">=</span> <span class="n">it</span><span class="o">;</span> <span class="o">}</span> <span class="c1">// Set element value</span>
  <span class="n">Link</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">n</span><span class="o">;</span> <span class="o">}</span>                <span class="c1">// Return next link</span>
  <span class="n">Link</span> <span class="nf">setNext</span><span class="o">(</span><span class="n">Link</span> <span class="n">inn</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">n</span> <span class="o">=</span> <span class="n">inn</span><span class="o">;</span> <span class="o">}</span>      <span class="c1">// Set next link</span>

  <span class="c1">// Extensions to support freelists</span>
  <span class="kd">static</span> <span class="n">Link</span> <span class="n">freelist</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>     <span class="c1">// Freelist for the class</span>

  <span class="c1">// Return a new link, from freelist if possible</span>
  <span class="kd">static</span> <span class="n">Link</span> <span class="nf">get</span><span class="o">(</span><span class="n">Object</span> <span class="n">it</span><span class="o">,</span> <span class="n">Link</span> <span class="n">inn</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">freelist</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
      <span class="k">return</span> <span class="k">new</span> <span class="n">Link</span><span class="o">(</span><span class="n">it</span><span class="o">,</span> <span class="n">inn</span><span class="o">);</span>        <span class="c1">// Get from &quot;new&quot;</span>
    <span class="n">Link</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">freelist</span><span class="o">;</span>              <span class="c1">// Get from freelist</span>
    <span class="n">freelist</span> <span class="o">=</span> <span class="n">freelist</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
    <span class="n">temp</span><span class="o">.</span><span class="na">setElement</span><span class="o">(</span><span class="n">it</span><span class="o">);</span>
    <span class="n">temp</span><span class="o">.</span><span class="na">setNext</span><span class="o">(</span><span class="n">inn</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">temp</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// Return a link node to the freelist</span>
  <span class="kt">void</span> <span class="nf">release</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">e</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>   <span class="c1">// Drop reference to the element</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">freelist</span><span class="o">;</span>
    <span class="n">freelist</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div></div><script>$(function() {$( "#Freelink_Freelink_code" ).tabs();});</script><p>The <code class="docutils literal"><span class="pre">freelist</span></code> variable declaration uses the keyword <code class="docutils literal"><span class="pre">static</span></code>.
This creates a single variable shared among all instances of the
<code class="docutils literal"><span class="pre">Link</span></code> nodes.
In this way, a single freelist is shared by all <code class="docutils literal"><span class="pre">Link</span></code> nodes.</p>
<p>Note how simple they are, because they need only remove and add an
element to the front of the freelist, respectively.
The freelist methods <code class="docutils literal"><span class="pre">get</span></code> and <code class="docutils literal"><span class="pre">release</span></code> both run in
<span class="math">\(\Theta(1)\)</span> time, except in the case where the freelist is
exhausted and the <code class="docutils literal"><span class="pre">new</span></code> operation must be called.
Here are the necessary modifications to members of the linked list
class to make use of the freelist version of the link class.</p>
<div id="Freelist_Freelist_code"><ul><li><a href="#Freelist_Freelist_code_Java_Generic">Java (Generic)</a></li><li><a href="#Freelist_Freelist_code_Java">Java</a></li><li><a href="#Freelist_Freelist_code_Processing">Processing</a></li></ul><div id="Freelist_Freelist_code_Java_Generic"><div class="highlight-java"><div class="highlight"><pre><span></span>  <span class="c1">// Insert &quot;it&quot; at current position</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">insert</span><span class="o">(</span><span class="n">E</span> <span class="n">it</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">curr</span><span class="o">.</span><span class="na">setNext</span><span class="o">(</span><span class="n">Link</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">curr</span><span class="o">.</span><span class="na">element</span><span class="o">(),</span> <span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">()));</span> <span class="c1">// Get link</span>
    <span class="n">curr</span><span class="o">.</span><span class="na">setElement</span><span class="o">(</span><span class="n">it</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">tail</span> <span class="o">==</span> <span class="n">curr</span><span class="o">)</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>    <span class="c1">// New tail</span>
    <span class="n">listSize</span><span class="o">++;</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// Append &quot;it&quot; to list</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">append</span><span class="o">(</span><span class="n">E</span> <span class="n">it</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Link</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">Link</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="n">tail</span><span class="o">.</span><span class="na">setNext</span><span class="o">(</span><span class="n">temp</span><span class="o">);</span>
    <span class="n">tail</span><span class="o">.</span><span class="na">setElement</span><span class="o">(</span><span class="n">it</span><span class="o">);</span>
    <span class="n">tail</span> <span class="o">=</span> <span class="n">tail</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
    <span class="n">listSize</span><span class="o">++;</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// Remove and return current element</span>
  <span class="kd">public</span> <span class="n">E</span> <span class="nf">remove</span> <span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">curr</span> <span class="o">==</span> <span class="n">tail</span><span class="o">)</span> <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>          <span class="c1">// Nothing to remove</span>
    <span class="n">E</span> <span class="n">it</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="na">element</span><span class="o">();</span>                  <span class="c1">// Remember value</span>
    <span class="n">curr</span><span class="o">.</span><span class="na">setElement</span><span class="o">(</span><span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">().</span><span class="na">element</span><span class="o">());</span> <span class="c1">// Pull forward the next element</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">()</span> <span class="o">==</span> <span class="n">tail</span><span class="o">)</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">curr</span><span class="o">;</span>   <span class="c1">// Removed last, move tail</span>
    <span class="n">Link</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">tempptr</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>             <span class="c1">// Remember the link</span>
    <span class="n">curr</span><span class="o">.</span><span class="na">setNext</span><span class="o">(</span><span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">().</span><span class="na">next</span><span class="o">());</span>       <span class="c1">// Point around unneeded link</span>
    <span class="n">tempptr</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>                      <span class="c1">// Release the link</span>
    <span class="n">listSize</span><span class="o">--;</span>                             <span class="c1">// Decrement element count</span>
    <span class="k">return</span> <span class="n">it</span><span class="o">;</span>                              <span class="c1">// Return value</span>
  <span class="o">}</span>
</pre></div>
</div>
</div><div id="Freelist_Freelist_code_Java"><div class="highlight-java"><div class="highlight"><pre><span></span>  <span class="c1">// Insert &quot;it&quot; at current position</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">insert</span><span class="o">(</span><span class="n">Object</span> <span class="n">it</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">curr</span><span class="o">.</span><span class="na">setNext</span><span class="o">(</span><span class="n">Link</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">curr</span><span class="o">.</span><span class="na">element</span><span class="o">(),</span> <span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">()));</span> <span class="c1">// Get link</span>
    <span class="n">curr</span><span class="o">.</span><span class="na">setElement</span><span class="o">(</span><span class="n">it</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">tail</span> <span class="o">==</span> <span class="n">curr</span><span class="o">)</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>    <span class="c1">// New tail</span>
    <span class="n">listSize</span><span class="o">++;</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// Append &quot;it&quot; to list</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">append</span><span class="o">(</span><span class="n">Object</span> <span class="n">it</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">tail</span><span class="o">.</span><span class="na">setNext</span><span class="o">(</span><span class="n">Link</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">));</span>
    <span class="n">tail</span><span class="o">.</span><span class="na">setElement</span><span class="o">(</span><span class="n">it</span><span class="o">);</span>
    <span class="n">tail</span> <span class="o">=</span> <span class="n">tail</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
    <span class="n">listSize</span><span class="o">++;</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// Remove and return current element</span>
  <span class="kd">public</span> <span class="n">Object</span> <span class="nf">remove</span> <span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">curr</span> <span class="o">==</span> <span class="n">tail</span><span class="o">)</span> <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>          <span class="c1">// Nothing to remove</span>
    <span class="n">Object</span> <span class="n">it</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="na">element</span><span class="o">();</span>             <span class="c1">// Remember value</span>
    <span class="n">curr</span><span class="o">.</span><span class="na">setElement</span><span class="o">(</span><span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">().</span><span class="na">element</span><span class="o">());</span> <span class="c1">// Pull forward the next element</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">()</span> <span class="o">==</span> <span class="n">tail</span><span class="o">)</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">curr</span><span class="o">;</span>   <span class="c1">// Removed last, move tail</span>
    <span class="n">Link</span> <span class="n">tempptr</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>             <span class="c1">// Remember the link</span>
    <span class="n">curr</span><span class="o">.</span><span class="na">setNext</span><span class="o">(</span><span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">().</span><span class="na">next</span><span class="o">());</span>       <span class="c1">// Point around unneeded link</span>
    <span class="n">tempptr</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>                      <span class="c1">// Release the link</span>
    <span class="n">listSize</span><span class="o">--;</span>                             <span class="c1">// Decrement element count</span>
    <span class="k">return</span> <span class="n">it</span><span class="o">;</span>                              <span class="c1">// Return value</span>
  <span class="o">}</span>
</pre></div>
</div>
</div><div id="Freelist_Freelist_code_Processing"><div class="highlight-java"><div class="highlight"><pre><span></span>  <span class="c1">// Insert &quot;it&quot; at current position</span>
  <span class="kt">boolean</span> <span class="nf">insert</span><span class="o">(</span><span class="n">Object</span> <span class="n">it</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">curr</span><span class="o">.</span><span class="na">setNext</span><span class="o">(</span><span class="n">Link</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">curr</span><span class="o">.</span><span class="na">element</span><span class="o">(),</span> <span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">()));</span> <span class="c1">// Get link</span>
    <span class="n">curr</span><span class="o">.</span><span class="na">setElement</span><span class="o">(</span><span class="n">it</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">tail</span> <span class="o">==</span> <span class="n">curr</span><span class="o">)</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>    <span class="c1">// New tail</span>
    <span class="n">listSize</span><span class="o">++;</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// Append &quot;it&quot; to list</span>
  <span class="kt">boolean</span> <span class="nf">append</span><span class="o">(</span><span class="n">Object</span> <span class="n">it</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">tail</span><span class="o">.</span><span class="na">setNext</span><span class="o">(</span><span class="n">Link</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">));</span>
    <span class="n">tail</span><span class="o">.</span><span class="na">setElement</span><span class="o">(</span><span class="n">it</span><span class="o">);</span>
    <span class="n">tail</span> <span class="o">=</span> <span class="n">tail</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
    <span class="n">listSize</span><span class="o">++;</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// Remove and return current element</span>
  <span class="n">Object</span> <span class="nf">remove</span> <span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">curr</span> <span class="o">==</span> <span class="n">tail</span><span class="o">)</span> <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>          <span class="c1">// Nothing to remove</span>
    <span class="n">Object</span> <span class="n">it</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="na">element</span><span class="o">();</span>             <span class="c1">// Remember value</span>
    <span class="n">curr</span><span class="o">.</span><span class="na">setElement</span><span class="o">(</span><span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">().</span><span class="na">element</span><span class="o">());</span> <span class="c1">// Pull forward the next element</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">()</span> <span class="o">==</span> <span class="n">tail</span><span class="o">)</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">curr</span><span class="o">;</span>   <span class="c1">// Removed last, move tail</span>
    <span class="n">Link</span> <span class="n">tempptr</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>             <span class="c1">// Remember the link</span>
    <span class="n">curr</span><span class="o">.</span><span class="na">setNext</span><span class="o">(</span><span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">().</span><span class="na">next</span><span class="o">());</span>       <span class="c1">// Point around unneeded link</span>
    <span class="n">tempptr</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>                      <span class="c1">// Release the link</span>
    <span class="n">listSize</span><span class="o">--;</span>                             <span class="c1">// Decrement element count</span>
    <span class="k">return</span> <span class="n">it</span><span class="o">;</span>                              <span class="c1">// Return value</span>
  <span class="o">}</span>
</pre></div>
</div>
</div></div><script>$(function() {$( "#Freelist_Freelist_code" ).tabs();});</script><p>How much time is saved by using freelists depends on the language that
you are programming in.
In a language like C++ where the programmer must call <code class="docutils literal"><span class="pre">new</span></code> and
<code class="docutils literal"><span class="pre">delete</span></code> to manage memory, getting a node from your own freelist
requires less than one tenth of the time required by the <code class="docutils literal"><span class="pre">new</span></code>
operator.
In a language like Java that uses garbage collection, it might at
first appear that using your own freelist saves no time, because
Java's <code class="docutils literal"><span class="pre">new</span></code> operator can quickly return space from the current
start of its memory pool.
However, when you do not use a freelist, dropping access to nodes
creates garbage which leads to expensive processing at garbage
collection time.</p>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td>A language like C++ could use operator overloading to redefine
the <code class="docutils literal"><span class="pre">new</span></code> and <code class="docutils literal"><span class="pre">delete</span></code> operators.</td></tr>
</tbody>
</table>
<script type="text/javascript" src="../../../AV/List/llist.js"></script>
<script type="text/javascript" src="../../../AV/List/listFreeCON.js"></script>
</div>
</div>


      </div>
      <div class="bottomnav">
      <p><span class="email_div" style="display:inline;"><a id="contact_us" class="contact" style="float:left;color:blue;" rel="nofollow" href="mailto:">Contact Us |</a><a style="float:left;color:blue;" rel="nofollow" href="../../../lib/Privacy.html" target="_blank">| Privacy |</a> <a style="float:left;color:blue;" rel="nofollow" href="../../../lib/license.html" target="_blank">| License</a></span>&#160;&#160;
      
        «&#160;&#160;<a id="prevmod1" href="StackLinked.html">6.9. Linked Stacks</a>
        &#160;&#160;::&#160;&#160;
        <a  class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a  id="nextmod1" href="StackRecur.html">6.11. Implementing Recursion</a>&#160;&#160;»

</p>
      </div>
      <img style="float:right;" src="_static/nsf1.gif" height="62" width="62" alt="nsf"/>


    <div class="footer">
      <p>
        <span class="email_div" style="display:inline;">
          <a id="contact_us" class="contact" style="float:left;color:blue;" rel="nofollow" href="mailto:">Contact Us |</a>
          <a id="bugreport-link" style="float:left;color:blue;" class="bugreport-link" href="#">| Report a bug</a>
        </span>
      </p>
        &copy; Copyright 2016 by OpenDSA Project Contributors and distributed under an MIT license.
      Last updated on Nov 27, 2017.
      Created using <a target="_blank" href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.
    </div>
    
<div id="bugreport-box" class="bugreport-popup ">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close Window" /></a>
  <form method="post" class="report" action="https://#">
    <fieldset class="textbox">
      <div id="bug_error" class="error"></div>
      <label>
        <span>Summary*:</span>
        <input type="text" id="b_title" placeholder="Summary" />
      </label>

      <label class="os">
        <span>Operating system*:</span>
        <select id="b_os">
          <option value="windows">Windows</option>
          <option value="macos">Mac OS</option>
          <option value="linux">Linux</option>
          <option value="ios">iOS</option>
          <option value="android">Android</option>
          <option value="other">Other</option>
        </select>
      </label>

      <label class="browser">
        <span>Browser*:</span>
        <select id="b_browser">
          <option value="chrome">Chrome</option>
          <option value="safari">Safari</option>
          <option value="internetexplorer">Internet Explorer</option>
          <option value="opera">Opera</option>
          <option value="other">Other</option>
        </select>
      </label>

      <label class="description">
        <span>Description*:</span><br>
        <textarea id="b_description" rows="5" cols="25" placeholder="***BUG** Please enter: (1) a consice description of the problem. (2) steps to reproduce bug. (3) the version of your browser and operating system."></textarea>
      </label>

      <label class="screenshot">
        <span>Attach a screenshot (optional):</span>
        <input type="file" id="b_screenshot" accept="image/*" placeholder="Attach a screenshot (optional)">
      </label>

      <p>
        <input type="submit" id="bug-submit-button" value="Submit &rarr;"/>
      </p>
    </fieldset>
  </form>
</div>

  </body>
</html>