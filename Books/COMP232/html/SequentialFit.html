
<!DOCTYPE html>




<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>13.3. Sequential-Fit Methods &mdash; COMP232: Data Structures and Algorithms</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/normalize.css" type="text/css" />
    <link rel="stylesheet" href="../../../JSAV/css/JSAV.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/odsaMOD-min.css" type="text/css" />
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/odsaStyle-min.css" type="text/css" />
    
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    './',
      VERSION:     '0.4.1',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
      },
      "HTML-CSS": {
        scale: "80"
      }
    });
  </script>
    <link rel="index" title="COMP232: Data Structures and Algorithms" href="index.html" />
    <link rel="next" title="4. First Fit" href="FirstFit.html" />
    <link rel="prev" title="2. Dynamic Storage Allocation" href="Dynamic.html" />

  </head>

  <body>


      <div class="header">
        
  
      <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../JSAV/lib/jquery.transit.js"></script>
    <script type="text/javascript" src="../../../JSAV/lib/raphael.js"></script>
    <script type="text/javascript" src="../../../JSAV/build/JSAV-min.js"></script>
    <script type="text/javascript" src="_static/config.js"></script>
    <script type="text/javascript" src="../../../lib/odsaUtils-min.js"></script>
    <script type="text/javascript" src="../../../lib/odsaMOD-min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
    <script type="text/javascript" src="../../../lib/dataStructures.js"></script>
    <script type="text/javascript" src="../../../lib/conceptMap.js"></script>

        
<a id="username-link" style="float:right;color:red;margin:10px 20px auto; display: none" class="username-link" href="Gradebook.html"></a>
<a id="login-link" style="float:right;color:red;margin:10px 20px auto" class="login-link" href="#"><Macro 'login'></a>
<div id="login-box" class="login-popup">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a>
  <form method="post" class="signin" action="https://#">
    <fieldset class="textbox">
      <label class="username">
        <span>Username</span>
        <input id="username" value="" type="text" autocomplete="on" placeholder="Username" tabindex="1">
      </label>
      <label class="password">
        <span>Password</span>
        <input id="password" value="" type="password" placeholder="Password" tabindex="2">
        <span><a id="forgot" href="#">Forgot your password?</a></span>
      </label>

      <p>
        <input type="submit" id="login-submit-button" value="Sign in" tabindex="3" />
      </p>
      <p>
        <input type="button" id="register-button" value="Register" tabindex="4" />
      </p>
    </fieldset>
  </form>
</div>

        
<a id="registration-link" style="float:right;color:red;margin:10px 20px auto" class="registration-link" href="#">Register</a>
<div id="registration-box" class="registration-popup ">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close Window" /></a>
  <form method="post" class="signin" action="https://#">
    <fieldset class="textbox">
      <div id="register_error" class="error"></div>
      <label class="username">
        <span>Username:</span>
        <input type="text" id="user" placeholder="Username" />
      </label>

      <label class="password">
        <span>Password</span>
        <input id="pass" type="password" placeholder="Password" />
      </label>

      <label class="password">
        <span>Confirm Password</span>
        <input id="rpass" type="password" placeholder="Confirm Password" />
      </label>

      <label class="email">
        <span>Email:</span>
        <input type="text" id="email" placeholder="Email">
      </label>

      <p>
        <input type="submit" id="register-submit-button" value="Register &rarr;"/>
      </p>
    </fieldset>
  </form>
</div>
<img class="leftlogo" src="_static/OpenDSALogoT64.png" alt="Logo"/><div class="title-wrapper">
          <div class="title-inbetween" style="display: table-cell; vertical-align: middle;">
            <div class="title-content">
              <h1 class="heading" ><a href="index.html">
                <span>COMP232: Data Structures and Algorithms</span></a></h1>
              <h2 class="heading" ><span>Chapter 13 Memory Management</span></h2>
            </div>
          </div>
        </div>
      </div>
      <div class="topnav">
        <p>
            <a style="float:left;color:blue;" href="../source/SequentialFit.rst"
              target="_blank" rel="nofollow">Show Source | </a>&#160;&#160;
            <a class="abt" style="float:left;color:blue;" href="#" rel="nofollow">| About</a>&#160;&#160;

          
        «&#160;&#160;<a id="prevmod" href="Dynamic.html">13.2. Dynamic Storage Allocation</a>
        &#160;&#160;::&#160;&#160;
        <a  class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a  id="nextmod" href="FirstFit.html">13.4. First Fit</a>&#160;&#160;»


        </p>
      </div>
       
      <div class="content">
        
  <script>ODSA.SETTINGS.DISP_MOD_COMP = true;ODSA.SETTINGS.MODULE_NAME = "SequentialFit";ODSA.SETTINGS.MODULE_LONG_NAME = "Sequential-Fit Methods";ODSA.SETTINGS.MODULE_CHAPTER = "Memory Management"; ODSA.SETTINGS.BUILD_DATE = "2017-11-27 23:03:58"; ODSA.SETTINGS.BUILD_CMAP = false;JSAV_OPTIONS['lang']='en';JSAV_EXERCISE_OPTIONS['code']='java_generic';</script><link href="../../../AV/MemManage/seqFitCON.css" rel="stylesheet" type="text/css" />
<div class="section" id="sequential-fit-methods">
<h1>13.3. Sequential-Fit Methods<a class="headerlink" href="#sequential-fit-methods" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>13.3.1. Sequential-Fit Methods<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Sequential-fit methods attempt to find a &quot;good&quot; block to service
a storage request.
The three sequential-fit methods described here assume that the free
blocks are organized into a doubly linked list, as illustrated by
this figure.</p>
<div class="divdgm" id="freeblck">
<div id="seqFitCON">
</div>
<p class="caption" style="text-align: justify"> Figure 13.3.1: A doubly linked list of free blocks as seen by the memory manager.
Shaded areas represent allocated memory.
Unshaded areas are part of the freelist.</p>
</div>
<p>There are two basic approaches to implementing the freelist.
The simpler approach is to store the freelist separately from the
memory pool.
In other words, a simple linked-list implementation
can be used, where each node of the linked list
contains a pointer to a single free block in the memory pool.
This is fine if there is space available for the linked list itself,
separate from the memory pool.</p>
<p>The second approach to storing the freelist is more complicated but
saves space.
Because the free space is free, it can be used by the memory manager to
help it do its job; that is, the memory manager temporarily
&quot;borrows&quot; space within the free blocks to maintain its doubly
linked list.
To do so, each unallocated block must be large enough to hold these
pointers.
In addition, it is usually worthwhile to let the memory manager add a
few bytes of space to each reserved block for its own purposes.
In other words, a request for <span class="math">\(m\)</span> bytes of space might result in
slightly more than <span class="math">\(m\)</span> bytes being allocated by the memory
manager, with the extra bytes used by the memory manager itself rather
than the requester.
We will assume that all memory blocks are organized as shown in
the figure below, with space for tags and linked list pointers.
Here, free and reserved blocks are distinguished by a tag bit at both
the beginning and the end of the block, for reasons that will be
explained.
In addition, both free and reserved blocks have a size indicator
immediately after the tag bit at the beginning of the block to
indicate how large the block is.
Free blocks have a second size indicator immediately preceding the tag
bit at the end of the block.
Finally, free blocks have left and right pointers to their neighbors
in the free block list.</p>
<div class="figure align-center" id="memtags" style="width: 90%">
<a class="reference internal image-reference" href="_images/MemTags.png"><img alt="Blocks as seen by the memory manager" src="_images/MemTags.png" style="width: 400px;" /></a>
<p class="caption" style="text-align: justify"> Figure 13.3.2: Blocks as seen by the memory manager.
Each block includes additional information such as freelist link
pointers, start and end tags, and a size field.
(a) The layout for a free block.
The beginning of the block contains the tag bit field, the block size
field, and two pointers for the freelist.
The end of the block contains a second tag field and a second block
size field.
(b) A reserved block of <span class="math">\(k\)</span> bytes.
The memory manager adds to these <span class="math">\(k\)</span> bytes an additional tag
bit field and block size field at the beginning of the block,
and a second tag field at the end of the block.</p>
</div>
<p>The information fields associated with each block permit the memory
manager to allocate and deallocate blocks as needed.
When a request comes in for <span class="math">\(m\)</span> words of storage, the memory
manager searches the linked list of free blocks until it finds a
&quot;suitable&quot; block for allocation.
How it determines which block is suitable will be discussed below.
If the block contains exactly <span class="math">\(m\)</span> words (plus space for the tag
and size fields), then it is removed from the freelist.
If the block (of size <span class="math">\(k\)</span>) is large enough,
then the remaining <span class="math">\(k - m\)</span> words are reserved as a block on the
freelist, in the current location.</p>
<p>When a block <span class="math">\(F\)</span> is freed, it must be merged into the freelist.
If we do not care about merging adjacent free blocks, then this
is a simple insertion into the doubly linked list of free blocks.
However, we would like to merge adjacent blocks, because
this allows the memory manager to serve requests of the largest
possible size.
Merging is easily done due to the tag and size fields stored at the
ends of each block, as illustrated by the figure below.
Here, the memory manager first checks the unit of memory immediately
preceding block <span class="math">\(F\)</span> to see if the preceding block (call
it <span class="math">\(P\)</span>) is also free.
If it is, then the memory unit before <span class="math">\(P\)</span> 's tag bit stores
the size of <span class="math">\(P\)</span>, thus indicating the position for the beginning
of the block in memory.
<span class="math">\(P\)</span> can then simply have its size extended to include
block <span class="math">\(F\)</span>.
If block <span class="math">\(P\)</span> is not free, then we just add block <span class="math">\(F\)</span> to
the freelist.
Finally, we also check the bit following the end of block <span class="math">\(F\)</span>.
If this bit indicates that the following block (call it <span class="math">\(S\)</span>) is
free, then <span class="math">\(S\)</span> is removed from the freelist and the size
of <span class="math">\(F\)</span> is extended appropriately.</p>
<div class="figure align-center" id="memex" style="width: 90%">
<a class="reference internal image-reference" href="_images/MemEx.png"><img alt="Adding a block to the freelist." src="_images/MemEx.png" style="width: 400px;" /></a>
<p class="caption" style="text-align: justify"> Figure 13.3.3: Adding block <span class="math">\(F\)</span> to the freelist.
The word immediately preceding the start of <span class="math">\(F\)</span> in the memory
pool stores the tag bit of the preceding block <span class="math">\(P\)</span>.
If <span class="math">\(P\)</span> is free, merge <span class="math">\(F\)</span> into <span class="math">\(P\)</span>.
We find the end of <span class="math">\(F\)</span> by using <span class="math">\(F\)</span> 's size field.
The word following the end of <span class="math">\(F\)</span> is the tag field for
block <span class="math">\(S\)</span>.
If <span class="math">\(S\)</span> is free, merge it into <span class="math">\(F\)</span>.</p>
</div>
<p>We now consider how a &quot;suitable&quot; free block is selected to service a
memory request.
To illustrate the process, assume that we have a memory pool with 200
units of storage. After some series of allocation requests and releases,
we have reached a point where there are four free blocks
on the freelist of sizes 25, 35, 32, and 45 (in that order).
Assume that a request is made for 30 units of storage.
For our examples, we ignore the overhead imposed for the tag, link,
and size fields discussed above.</p>
<script type="text/javascript" src="../../../AV/MemManage/seqFitCON.js"></script>
</div>
</div>


      </div>
      <div class="bottomnav">
      <p><span class="email_div" style="display:inline;"><a id="contact_us" class="contact" style="float:left;color:blue;" rel="nofollow" href="mailto:">Contact Us |</a><a style="float:left;color:blue;" rel="nofollow" href="../../../lib/Privacy.html" target="_blank">| Privacy |</a> <a style="float:left;color:blue;" rel="nofollow" href="../../../lib/license.html" target="_blank">| License</a></span>&#160;&#160;
      
        «&#160;&#160;<a id="prevmod1" href="Dynamic.html">13.2. Dynamic Storage Allocation</a>
        &#160;&#160;::&#160;&#160;
        <a  class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a  id="nextmod1" href="FirstFit.html">13.4. First Fit</a>&#160;&#160;»

</p>
      </div>
      <img style="float:right;" src="_static/nsf1.gif" height="62" width="62" alt="nsf"/>


    <div class="footer">
      <p>
        <span class="email_div" style="display:inline;">
          <a id="contact_us" class="contact" style="float:left;color:blue;" rel="nofollow" href="mailto:">Contact Us |</a>
          <a id="bugreport-link" style="float:left;color:blue;" class="bugreport-link" href="#">| Report a bug</a>
        </span>
      </p>
        &copy; Copyright 2016 by OpenDSA Project Contributors and distributed under an MIT license.
      Last updated on Nov 27, 2017.
      Created using <a target="_blank" href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.
    </div>
    
<div id="bugreport-box" class="bugreport-popup ">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close Window" /></a>
  <form method="post" class="report" action="https://#">
    <fieldset class="textbox">
      <div id="bug_error" class="error"></div>
      <label>
        <span>Summary*:</span>
        <input type="text" id="b_title" placeholder="Summary" />
      </label>

      <label class="os">
        <span>Operating system*:</span>
        <select id="b_os">
          <option value="windows">Windows</option>
          <option value="macos">Mac OS</option>
          <option value="linux">Linux</option>
          <option value="ios">iOS</option>
          <option value="android">Android</option>
          <option value="other">Other</option>
        </select>
      </label>

      <label class="browser">
        <span>Browser*:</span>
        <select id="b_browser">
          <option value="chrome">Chrome</option>
          <option value="safari">Safari</option>
          <option value="internetexplorer">Internet Explorer</option>
          <option value="opera">Opera</option>
          <option value="other">Other</option>
        </select>
      </label>

      <label class="description">
        <span>Description*:</span><br>
        <textarea id="b_description" rows="5" cols="25" placeholder="***BUG** Please enter: (1) a consice description of the problem. (2) steps to reproduce bug. (3) the version of your browser and operating system."></textarea>
      </label>

      <label class="screenshot">
        <span>Attach a screenshot (optional):</span>
        <input type="file" id="b_screenshot" accept="image/*" placeholder="Attach a screenshot (optional)">
      </label>

      <p>
        <input type="submit" id="bug-submit-button" value="Submit &rarr;"/>
      </p>
    </fieldset>
  </form>
</div>

  </body>
</html>