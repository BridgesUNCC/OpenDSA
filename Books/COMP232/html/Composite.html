
<!DOCTYPE html>




<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>9.9. Composite-based Expression Tree &mdash; COMP232: Data Structures and Algorithms</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/normalize.css" type="text/css" />
    <link rel="stylesheet" href="../../../JSAV/css/JSAV.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/odsaMOD-min.css" type="text/css" />
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/odsaStyle-min.css" type="text/css" />
    
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    './',
      VERSION:     '0.4.1',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
      },
      "HTML-CSS": {
        scale: "80"
      }
    });
  </script>
    <link rel="index" title="COMP232: Data Structures and Algorithms" href="index.html" />
    <link rel="next" title="10. Binary Tree Space Requirements" href="BinaryTreeNodeSpace.html" />
    <link rel="prev" title="8. Binary Tree Node Implementations" href="BinaryTreeImpl.html" />

  </head>

  <body>


      <div class="header">
        
  
      <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../JSAV/lib/jquery.transit.js"></script>
    <script type="text/javascript" src="../../../JSAV/lib/raphael.js"></script>
    <script type="text/javascript" src="../../../JSAV/build/JSAV-min.js"></script>
    <script type="text/javascript" src="_static/config.js"></script>
    <script type="text/javascript" src="../../../lib/odsaUtils-min.js"></script>
    <script type="text/javascript" src="../../../lib/odsaMOD-min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
    <script type="text/javascript" src="../../../lib/dataStructures.js"></script>
    <script type="text/javascript" src="../../../lib/conceptMap.js"></script>

        
<a id="username-link" style="float:right;color:red;margin:10px 20px auto; display: none" class="username-link" href="Gradebook.html"></a>
<a id="login-link" style="float:right;color:red;margin:10px 20px auto" class="login-link" href="#"><Macro 'login'></a>
<div id="login-box" class="login-popup">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a>
  <form method="post" class="signin" action="https://#">
    <fieldset class="textbox">
      <label class="username">
        <span>Username</span>
        <input id="username" value="" type="text" autocomplete="on" placeholder="Username" tabindex="1">
      </label>
      <label class="password">
        <span>Password</span>
        <input id="password" value="" type="password" placeholder="Password" tabindex="2">
        <span><a id="forgot" href="#">Forgot your password?</a></span>
      </label>

      <p>
        <input type="submit" id="login-submit-button" value="Sign in" tabindex="3" />
      </p>
      <p>
        <input type="button" id="register-button" value="Register" tabindex="4" />
      </p>
    </fieldset>
  </form>
</div>

        
<a id="registration-link" style="float:right;color:red;margin:10px 20px auto" class="registration-link" href="#">Register</a>
<div id="registration-box" class="registration-popup ">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close Window" /></a>
  <form method="post" class="signin" action="https://#">
    <fieldset class="textbox">
      <div id="register_error" class="error"></div>
      <label class="username">
        <span>Username:</span>
        <input type="text" id="user" placeholder="Username" />
      </label>

      <label class="password">
        <span>Password</span>
        <input id="pass" type="password" placeholder="Password" />
      </label>

      <label class="password">
        <span>Confirm Password</span>
        <input id="rpass" type="password" placeholder="Confirm Password" />
      </label>

      <label class="email">
        <span>Email:</span>
        <input type="text" id="email" placeholder="Email">
      </label>

      <p>
        <input type="submit" id="register-submit-button" value="Register &rarr;"/>
      </p>
    </fieldset>
  </form>
</div>
<img class="leftlogo" src="_static/OpenDSALogoT64.png" alt="Logo"/><div class="title-wrapper">
          <div class="title-inbetween" style="display: table-cell; vertical-align: middle;">
            <div class="title-content">
              <h1 class="heading" ><a href="index.html">
                <span>COMP232: Data Structures and Algorithms</span></a></h1>
              <h2 class="heading" ><span>Chapter 9 Binary Trees</span></h2>
            </div>
          </div>
        </div>
      </div>
      <div class="topnav">
        <p>
            <a style="float:left;color:blue;" href="../source/Composite.rst"
              target="_blank" rel="nofollow">Show Source | </a>&#160;&#160;
            <a class="abt" style="float:left;color:blue;" href="#" rel="nofollow">| About</a>&#160;&#160;

          
        «&#160;&#160;<a id="prevmod" href="BinaryTreeImpl.html">9.8. Binary Tree Node Implementations</a>
        &#160;&#160;::&#160;&#160;
        <a  class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a  id="nextmod" href="BinaryTreeNodeSpace.html">9.10. Binary Tree Space Requirements</a>&#160;&#160;»


        </p>
      </div>
       
      <div class="content">
        
  <script>ODSA.SETTINGS.DISP_MOD_COMP = true;ODSA.SETTINGS.MODULE_NAME = "Composite";ODSA.SETTINGS.MODULE_LONG_NAME = "Composite Design Pattern";ODSA.SETTINGS.MODULE_CHAPTER = "Binary Trees"; ODSA.SETTINGS.BUILD_DATE = "2017-11-27 23:03:57"; ODSA.SETTINGS.BUILD_CMAP = false;JSAV_OPTIONS['lang']='en';JSAV_EXERCISE_OPTIONS['code']='java_generic';</script><link href="../../../AV/Binary/BTCON.css" rel="stylesheet" type="text/css" />
<div class="section" id="composite-based-expression-tree">
<h1>9.9. Composite-based Expression Tree<a class="headerlink" href="#composite-based-expression-tree" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>9.9.1. Composite-based Expression Tree<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>There is another approach that we can take to represent separate leaf
and internal nodes, also using a virtual base class and separate node
classes for the two types.
This is to implement nodes using the <a class="reference internal" href="Glossary.html#term-composite-design-pattern"><em class="xref std std-term ODSAterm">Composite design pattern</em></a>.
This approach is noticeably different from the
<a class="reference internal" href="BinaryTreeImpl.html#binarytreeimpl"><em>procedural approach</em></a> in that the
node classes themselves implement the functionality of <code class="docutils literal"><span class="pre">traverse</span></code>.
Here is the implementation.
Base class <code class="docutils literal"><span class="pre">VarBinNode</span></code> declares a member function
<code class="docutils literal"><span class="pre">traverse</span></code> that each subclass must implement.
Each subclass then implements its own appropriate behavior for its
role in a traversal.
The whole traversal process is called by invoking <code class="docutils literal"><span class="pre">traverse</span></code>
on the root node, which in turn invokes <code class="docutils literal"><span class="pre">traverse</span></code> on its
children.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span>   <span class="cm">/** Base class: Composite */</span>
   <span class="kd">interface</span> <span class="nc">VarBinNode</span> <span class="o">{</span>
     <span class="kt">boolean</span> <span class="nf">isLeaf</span><span class="o">();</span>
     <span class="kt">void</span> <span class="nf">traverse</span><span class="o">();</span>
   <span class="o">}</span>

   <span class="cm">/** Leaf node: Composite */</span>
   <span class="kd">class</span> <span class="nc">VarLeafNode</span> <span class="kd">implements</span> <span class="n">VarBinNode</span> <span class="o">{</span>
     <span class="kd">private</span> <span class="n">String</span> <span class="n">operand</span><span class="o">;</span>                 <span class="c1">// Operand value</span>

     <span class="n">VarLeafNode</span><span class="o">(</span><span class="n">String</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span> <span class="n">operand</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span> <span class="o">}</span>
     <span class="kt">boolean</span> <span class="nf">isLeaf</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span> <span class="o">}</span>
     <span class="n">String</span> <span class="nf">value</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">operand</span><span class="o">;</span> <span class="o">}</span>

     <span class="kt">void</span> <span class="nf">traverse</span><span class="o">()</span> <span class="o">{</span>
       <span class="n">Visit</span><span class="o">.</span><span class="na">VisitLeafNode</span><span class="o">(</span><span class="n">operand</span><span class="o">);</span>
     <span class="o">}</span>
   <span class="o">}</span>

   <span class="cm">/** Internal node: Composite */</span>
   <span class="kd">class</span> <span class="nc">VarIntlNode</span> <span class="kd">implements</span> <span class="n">VarBinNode</span> <span class="o">{</span> <span class="c1">// Internal node</span>
     <span class="kd">private</span> <span class="n">VarBinNode</span> <span class="n">left</span><span class="o">;</span>                <span class="c1">// Left child</span>
     <span class="kd">private</span> <span class="n">VarBinNode</span> <span class="n">right</span><span class="o">;</span>               <span class="c1">// Right child</span>
     <span class="kd">private</span> <span class="n">Character</span> <span class="n">operator</span><span class="o">;</span>             <span class="c1">// Operator value</span>

     <span class="n">VarIntlNode</span><span class="o">(</span><span class="n">Character</span> <span class="n">op</span><span class="o">,</span>
                        <span class="n">VarBinNode</span> <span class="n">l</span><span class="o">,</span> <span class="n">VarBinNode</span> <span class="n">r</span><span class="o">)</span>
       <span class="o">{</span> <span class="n">operator</span> <span class="o">=</span> <span class="n">op</span><span class="o">;</span> <span class="n">left</span> <span class="o">=</span> <span class="n">l</span><span class="o">;</span> <span class="n">right</span> <span class="o">=</span> <span class="n">r</span><span class="o">;</span> <span class="o">}</span>
     <span class="kt">boolean</span> <span class="nf">isLeaf</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span> <span class="o">}</span>
     <span class="n">VarBinNode</span> <span class="nf">leftchild</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">left</span><span class="o">;</span> <span class="o">}</span>
     <span class="n">VarBinNode</span> <span class="nf">rightchild</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">right</span><span class="o">;</span> <span class="o">}</span>
     <span class="n">Character</span> <span class="nf">value</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">operator</span><span class="o">;</span> <span class="o">}</span>

     <span class="kt">void</span> <span class="nf">traverse</span><span class="o">()</span> <span class="o">{</span>
       <span class="n">Visit</span><span class="o">.</span><span class="na">VisitInternalNode</span><span class="o">(</span><span class="n">operator</span><span class="o">);</span>
       <span class="k">if</span> <span class="o">(</span><span class="n">left</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="n">left</span><span class="o">.</span><span class="na">traverse</span><span class="o">();</span>
       <span class="k">if</span> <span class="o">(</span><span class="n">right</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="n">right</span><span class="o">.</span><span class="na">traverse</span><span class="o">();</span>
     <span class="o">}</span>
   <span class="o">}</span>

   <span class="cm">/** Preorder traversal */</span>
   <span class="kd">static</span> <span class="kt">void</span> <span class="nf">traverse</span><span class="o">(</span><span class="n">VarBinNode</span> <span class="n">rt</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">if</span> <span class="o">(</span><span class="n">rt</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="n">rt</span><span class="o">.</span><span class="na">traverse</span><span class="o">();</span>
   <span class="o">}</span>
</pre></div>
</div>
<p>When comparing the composite implementation to
the <a class="reference internal" href="BinaryTreeImpl.html#binarytreeimpl"><em>procedural approach</em></a>,
each has advantages and disadvantages.
The non-composite approach does not require that the node classes know
about the <code class="docutils literal"><span class="pre">traverse</span></code> function.
With this approach, it is easy to add new methods to the tree class
that do other traversals or other operations on nodes of the tree.
However, we see that <code class="docutils literal"><span class="pre">traverse</span></code> in
the non-composite approach does
need to be familiar with each node subclass.
Adding a new node subclass would therefore require modifications to
the <code class="docutils literal"><span class="pre">traverse</span></code> function.
In contrast, the composite approach requires that any new operation on
the tree that requires a traversal also be implemented in the node
subclasses.
On the other hand, the composite approach
avoids the need for the <code class="docutils literal"><span class="pre">traverse</span></code> function to know
anything about the distinct abilities of the node subclasses.
Those subclasses handle the responsibility of performing a traversal
on themselves.
A secondary benefit is that there is no need for <code class="docutils literal"><span class="pre">traverse</span></code> to
explicitly enumerate all of the different node subclasses,
directing appropriate action for each.
With only two node classes this is a minor point.
But if there were many such subclasses, this could become a bigger
problem.
A disadvantage is that the traversal operation must not be called on a
NULL pointer, because there is no object to catch the call.
This problem could be avoided by using a
<a class="reference internal" href="DesignPatterns.html#designpatterns"><em>Flyweight</em></a>
to implement empty nodes.</p>
<p>Typically, the non-composite version would be
preferred in this example if <code class="docutils literal"><span class="pre">traverse</span></code> is a member function of
the tree class, and if the node subclasses are hidden from users of
that tree class.
On the other hand, if the nodes are objects that have meaning
to users of the tree separate from their existence as nodes in the
tree, then the composite version might be preferred because hiding the
internal behavior of the nodes becomes more important.</p>
<p>Another advantage of the composite design is that implementing each
node type's functionality might be easier.
This is because you can focus solely on the information passing and
other behavior needed by this node type to do its job.
This breaks down the complexity that many programmers feel overwhelmed
by when dealing with complex information flows related to recursive
processing.</p>
<script type="text/javascript" src="../../../AV/Binary/compositeTraversalCON.js"></script>
</div>
</div>


      </div>
      <div class="bottomnav">
      <p><span class="email_div" style="display:inline;"><a id="contact_us" class="contact" style="float:left;color:blue;" rel="nofollow" href="mailto:">Contact Us |</a><a style="float:left;color:blue;" rel="nofollow" href="../../../lib/Privacy.html" target="_blank">| Privacy |</a> <a style="float:left;color:blue;" rel="nofollow" href="../../../lib/license.html" target="_blank">| License</a></span>&#160;&#160;
      
        «&#160;&#160;<a id="prevmod1" href="BinaryTreeImpl.html">9.8. Binary Tree Node Implementations</a>
        &#160;&#160;::&#160;&#160;
        <a  class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a  id="nextmod1" href="BinaryTreeNodeSpace.html">9.10. Binary Tree Space Requirements</a>&#160;&#160;»

</p>
      </div>
      <img style="float:right;" src="_static/nsf1.gif" height="62" width="62" alt="nsf"/>


    <div class="footer">
      <p>
        <span class="email_div" style="display:inline;">
          <a id="contact_us" class="contact" style="float:left;color:blue;" rel="nofollow" href="mailto:">Contact Us |</a>
          <a id="bugreport-link" style="float:left;color:blue;" class="bugreport-link" href="#">| Report a bug</a>
        </span>
      </p>
        &copy; Copyright 2016 by OpenDSA Project Contributors and distributed under an MIT license.
      Last updated on Nov 27, 2017.
      Created using <a target="_blank" href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.
    </div>
    
<div id="bugreport-box" class="bugreport-popup ">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close Window" /></a>
  <form method="post" class="report" action="https://#">
    <fieldset class="textbox">
      <div id="bug_error" class="error"></div>
      <label>
        <span>Summary*:</span>
        <input type="text" id="b_title" placeholder="Summary" />
      </label>

      <label class="os">
        <span>Operating system*:</span>
        <select id="b_os">
          <option value="windows">Windows</option>
          <option value="macos">Mac OS</option>
          <option value="linux">Linux</option>
          <option value="ios">iOS</option>
          <option value="android">Android</option>
          <option value="other">Other</option>
        </select>
      </label>

      <label class="browser">
        <span>Browser*:</span>
        <select id="b_browser">
          <option value="chrome">Chrome</option>
          <option value="safari">Safari</option>
          <option value="internetexplorer">Internet Explorer</option>
          <option value="opera">Opera</option>
          <option value="other">Other</option>
        </select>
      </label>

      <label class="description">
        <span>Description*:</span><br>
        <textarea id="b_description" rows="5" cols="25" placeholder="***BUG** Please enter: (1) a consice description of the problem. (2) steps to reproduce bug. (3) the version of your browser and operating system."></textarea>
      </label>

      <label class="screenshot">
        <span>Attach a screenshot (optional):</span>
        <input type="file" id="b_screenshot" accept="image/*" placeholder="Attach a screenshot (optional)">
      </label>

      <p>
        <input type="submit" id="bug-submit-button" value="Submit &rarr;"/>
      </p>
    </fieldset>
  </form>
</div>

  </body>
</html>